---
title: "Motifs discovery in spatial-time series"
author: "Amin Bazaz, Heraldo Borges, Eduardo Ogasawara"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Motifs discovery in spatial-time series}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


This package `STSMotifs` allows to perform a research of motif in spatial-time series. The main purpose is to find a way to handle the issue of large amounts of data. The package offers a way to do this research quickly and efficiently.
To find the motifs, the `CSAMiningProcess` is used.
The process is decomposed by several steps :

1. Normalization and SAX Indexing
2. Search for Spatial-time Motifs
3. Rank Motifs

## Input
To use functions of this package, some inputs are needed. The quality of outputs depends strongly by these parameters.

* `dataset` : Dataframe which contains numerics values. Columns represent the space and rows the time.
```{r, echo=FALSE}
data <- STMotif::example_dataset[,1:10]
rownames(data) <- c()
head(data)
```

* `alpha`: The size of the alphabet used to encode the numerical values into a string with SAX.

* `word`: The length of the motif.

* `sb` and `tb`: The spatial and temporal block sizes.

A part of the process is applied into blocks (subsets of the original dataset). 
With the tb ("Time slice" number of rows in each block) and sb ("Space slice" number of columns in each block), the user can specify the block size and the block shape.

* `kappa` : Threshold to check the minimal number of spatial-time series occurrences inside each motif.

* `sigma` : Threshold to check the minimal number of occurrences inside each motif.



## CSAMiningProcess 

### Normalization and SAX Indexing
This first step, described by the **NormSAX** function, applies z-score data normalization in the entire dataset. Right after normalization, SAX indexing method is applied for a given alphabet `a`.

See more at [Normalization and SAX Indexing](normalization-and-sax.html)


### Search for Spatial-time Motifs
In this step, using `sb` and `tb` parameters, we create blocks from the original spatial-time dataset. All subsequences inside each block are combined to create a single time series. From this combined time series, motifs are verified using `kappa` and `sigma` thresholds. Then, all the occurrences of motifs from neighboring blocks are grouped.

See more at [Search for Spatial-time Motifs](search-stmotifs.html)


### Rank Spatial-time Motifs
The last step, described by the $RankSTMotifs$ function, makes a balance between distance among the occurrences of a motif with the encoded information on the motif itself and his quantity. It explores all motifs and their occurrences.




## Plot the result

There are three ways to visualize the result:

- Plot the intensity of values and highlight the motifs from the list.
- Plot the spatial-time series by selecting a range of columns in the dataset and highlight one motif.
- Run shiny application to have an interactive interface to visualize the result.
    
    
## Example

To see an example of output : [Output Example](examples.html)








